<script>
  $('#nodes').addClass('active');
</script>
<header class="jumbotron subhead">
  <h1>Nodes</h1>
  <p class="lead">All of your nodes show up here as they register.</p>
  <form class="form-search">Filter nodes: <input id="dt-filter-tables" type="text" class="input-medium" placeholder="hit t for filter"></p>
</header>

<% locations.each do |location| %>
  <section id="<%= html_id(location.common_name) %>">
    <div class="page-header">
      <h3><%= location.common_name.upcase %> <small><%= location.city.downcase %>, <%= location.state.downcase %></small></h3>
    </div>
    <table class="table table-striped table-bordered table-sort-no-filter-input">
      <thead>
        <tr>
          <th style="width: 70%">Hostname</th>
          <th style="width: 10%">First Seen</th>
          <th style="width: 10%">Last Seen</th>
          <th style="width: 10%">Pod</th>
        </tr>
      </thead>
      <tbody>
        <% location.nodes.order_by_pod_name.each do |node| %>
          <tr>
            <td><a href="/node/<%= node.id %>"><%= node.hostname %></a></td>
            <td><%= node.created_at.strftime("%D %R") %></td>
            <td><%= (Time.now - node.updated_at).to_i / 60 %> minutes ago</td>
            <td><%= display_pod_link(node) %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>
<% end %>
