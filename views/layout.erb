<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta content='en' http-equiv='content-language'>
    <title>Optopus</title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="/bootstrap/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/datatable_bootstrap.css">
    <link rel="stylesheet" href="/rickshaw/rickshaw.css">
    <link href="<%= request.scheme %>://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
    <script src="<%= request.scheme %>://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="<%= request.scheme %>://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script src="<%= request.scheme %>://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js"></script>
    <script src="<%= request.scheme %>://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/additional-methods.min.js"></script>
    <script src="/bootstrap/js/bootstrap.js"></script>
    <script src="/rickshaw/d3.min.js"></script>
    <script src="/rickshaw/d3.layout.min.js"></script>
    <script src="/rickshaw/rickshaw.js"></script>
    <script src="/js/libs/jquery.hotkeys.js"></script>
    <script src="/js/libs/jquery.dataTables.js"></script>
    <script src="/js/datatable_bootstrap.js"></script>
    <script>
      function load_util(path) {
        $.get(path, function(data) {
          $('#utils').html(data);
          $('#utils').modal('show');
        });
      }
      $('.subnav').scrollspy();
      $('.dropdown-toggle').dropdown();
      $('#utils').modal();
      $(function () {
        $('#search-query').focus(function() {
          $(this).select();
        });
      });
      $(document).bind('keyup', '/', function() {
        $('#search-query').focus();
      });
      $(document).bind('keyup', 'f', function() {
        $('#search-query').focus();
      });
      $(document).bind('keyup', 't', function() {
        $('#dt-filter-tables').focus();
      });
    </script>
  </head>
  <body data-spy="scroll" data-target=".subnav">
    <div class='navbar navbar-fixed-top'>
      <div class='navbar-inner'>
        <div class='container-fluid'>
          <a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
          </a>
          <a class='brand' href='/'>Ops Dashboard</a>
          <div class='nav-collapse'>
            <ul class='nav'>
              <li id='bare_metal'>
                <a href='/bare_metal'>Bare Metal</a>
              </li>
              <li id="nodes">
                <a href='/nodes'>Nodes</a>
              </li>
              <li id="networks">
                <a href='/networks'>Networks</a>
              </li>
              <li id="events">
                <a href='/events'>Events</a>
              </li>
              <% settings.plugin_navigation.each do |nav_link| %>
                <li id="<%= html_id(nav_link[:display]) %>"><a href="<%= nav_link[:route] %>"><%= nav_link[:display] %></a></li>
              <% end %>
            </ul>
            <ul class="nav pull-right">
              <%= display_login_or_logout %>
            </ul>
            <ul class="nav pull-right">
              <form class="form-search" style="margin: 0" action="/search">
                <input type="text" class="input-medium search-query" id="search-query" name="query" placeholder="hit / or f for search">
                <button type="submit" class="btn"><i class="icon-search"></i></button>
              </form>
            </ul>
            <ul class="nav pull-right">
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">Utilities<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#" onclick="load_util('/util/hypervisor_planner/form')">Hypervisor Planner</a></li>
                  <% utility_menu_sections.each do |section| %>
                    <% section.links.each do |link| %>
                      <li><a href="<%= link[:href] %>"><%= link[:display] %></a></li>
                    <% end %>
                  <% end %>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <%= erb :subnav %>
    <div class="container-fluid">
      <%= erb :flashes %>
      <%= yield %>
    </div>
  </body>
  <div id="utils" class="modal hide"></div>
</html>
